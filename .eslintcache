[{"/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/index.js":"1","/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/reportWebVitals.js":"2","/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/App.js":"3","/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/components/BottomBtn.js":"4","/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/components/TabList.js":"5","/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/components/FileSearch.js":"6","/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/components/Loader.js":"7","/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/hooks/useIpcRenderer.js":"8","/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/utils/defaultFiles.js":"9","/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/utils/fileHelper.js":"10","/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/utils/helper.js":"11","/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/components/FileList.js":"12","/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/hooks/useContextMenu.js":"13","/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/hooks/useKeyPress.js":"14","/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/index.js":"15","/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/reportWebVitals.js":"16","/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/App.js":"17","/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/components/FileSearch.js":"18","/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/components/TabList.js":"19","/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/components/BottomBtn.js":"20","/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/components/FileList.js":"21","/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/components/Loader.js":"22","/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/utils/defaultFiles.js":"23","/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/utils/helper.js":"24","/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/utils/fileHelper.js":"25","/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/hooks/useIpcRenderer.js":"26","/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/hooks/useKeyPress.js":"27","/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/hooks/useContextMenu.js":"28"},{"size":500,"mtime":1607500280046,"results":"29","hashOfConfig":"30"},{"size":362,"mtime":1607500280047,"results":"31","hashOfConfig":"30"},{"size":12174,"mtime":1609811546204,"results":"32","hashOfConfig":"30"},{"size":637,"mtime":1607516131756,"results":"33","hashOfConfig":"30"},{"size":1781,"mtime":1607592045297,"results":"34","hashOfConfig":"30"},{"size":2906,"mtime":1607671467004,"results":"35","hashOfConfig":"30"},{"size":342,"mtime":1569465024000,"results":"36","hashOfConfig":"30"},{"size":475,"mtime":1607670295034,"results":"37","hashOfConfig":"30"},{"size":512,"mtime":1607511095109,"results":"38","hashOfConfig":"30"},{"size":404,"mtime":1607599225965,"results":"39","hashOfConfig":"30"},{"size":650,"mtime":1608875302679,"results":"40","hashOfConfig":"30"},{"size":6162,"mtime":1607667459708,"results":"41","hashOfConfig":"30"},{"size":935,"mtime":1607666765559,"results":"42","hashOfConfig":"30"},{"size":765,"mtime":1607576949226,"results":"43","hashOfConfig":"30"},{"size":500,"mtime":1607500280046,"results":"44","hashOfConfig":"45"},{"size":362,"mtime":1607500280047,"results":"46","hashOfConfig":"45"},{"size":12174,"mtime":1609811546204,"results":"47","hashOfConfig":"45"},{"size":2906,"mtime":1607671467004,"results":"48","hashOfConfig":"45"},{"size":1781,"mtime":1607592045297,"results":"49","hashOfConfig":"45"},{"size":637,"mtime":1607516131756,"results":"50","hashOfConfig":"45"},{"size":6162,"mtime":1607667459708,"results":"51","hashOfConfig":"45"},{"size":342,"mtime":1569465024000,"results":"52","hashOfConfig":"45"},{"size":512,"mtime":1607511095109,"results":"53","hashOfConfig":"45"},{"size":650,"mtime":1608875302679,"results":"54","hashOfConfig":"45"},{"size":404,"mtime":1607599225965,"results":"55","hashOfConfig":"45"},{"size":475,"mtime":1607670295034,"results":"56","hashOfConfig":"45"},{"size":765,"mtime":1607576949226,"results":"57","hashOfConfig":"45"},{"size":935,"mtime":1607666765559,"results":"58","hashOfConfig":"45"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},"hzraby",{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"66","usedDeprecatedRules":"61"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71","usedDeprecatedRules":"61"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86","usedDeprecatedRules":"61"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"89","usedDeprecatedRules":"90"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"93","usedDeprecatedRules":"61"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},"7xpp12",{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"66","usedDeprecatedRules":"96"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71","usedDeprecatedRules":"96"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86","usedDeprecatedRules":"96"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"93","usedDeprecatedRules":"96"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"89"},"/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/index.js",[],["123","124"],"/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/reportWebVitals.js",[],"/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/App.js",["125","126","127","128"],"import { useState,useEffect} from 'react'\nimport FileSearch from './components/FileSearch'\nimport FileList from './components/FileList'\nimport BottomBtn from './components/BottomBtn'\nimport TabList from './components/TabList'\nimport Loader from './components/Loader'\nimport SimpleMDE from 'react-simplemde-editor'\nimport defaultFiles from './utils/defaultFiles'\nimport { v4 as uuidv4 } from 'uuid'\nimport {flattenArr,objToArr,timestampToString} from './utils/helper'\nimport fileHelper from './utils/fileHelper'\nimport useIpcRenderer from './hooks/useIpcRenderer'\n\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport 'easymde/dist/easymde.min.css'\nimport { faLess } from '@fortawesome/free-brands-svg-icons'\nimport { faPlus, faFileImport, faSave} from '@fortawesome/free-solid-svg-icons'\nimport './App.css';\n\n//require node modules\nconst { join, basename, extname, dirname} = window.require('path')\nconst { remote, ipcRenderer } = window.require('electron')\nconst Stroe = window.require('electron-store')\n\n//设置本地存储\nconst fileStore = new Stroe({'name':'Files Data'})\nconst settingsStore = new Stroe({'name':'Settings'})\n\nconst getAutoSync = () => ['accessKey', 'secretKey', 'bucketName','enableAutoSync'].every(key => !!settingsStore.get(key))\n\nconst saveFilesToStore = (files) => {\n  const fileStoreObj = objToArr(files).reduce((result,file)=>{\n    const { id, path, title, createdAt, isSynced, updatedAt } = file\n    result[id] = {\n      id,\n      path,\n      title,\n      createdAt,\n      isSynced,\n      updatedAt\n    }\n    return result\n  },{})\n  fileStore.set('files',fileStoreObj)\n}\n\nfunction App() {\n  // const [ files, setFiles ] = useState(flattenArr(defaultFiles))\n  const [files, setFiles] = useState(fileStore.get('files') || {})\n  const [ activeFileID, setActiveFileID ] = useState('')\n  const [ openedFileIDs, setOpenedFileIDs ] = useState([])\n  const [ unsavedFileIDs, setUnsavedFileIDs ] = useState([])\n  const [ searchedFiles, setSearchedFiles ] = useState([])\n  const [isLoading, setLoading]  = useState(false)\n\n  const filesArr = objToArr(files)\n  //保存位置\n  const savedLocation = settingsStore.get('savedFileLocation') || remote.app.getPath('documents')\n\n   //修改前\n  // const openedFiles = openedFileIDs.map(openID => {\n  //   return files.find(file => file.id === openID)\n  // })\n\n  // 修改后\n  const openedFiles = openedFileIDs.map(openID => {\n    return files[openID]\n  })\n\n  const fileClick = (fileID) => {\n    //set current active file\n    // 查看文档\n    setActiveFileID(fileID)\n    const currentFile = files[fileID]\n    const {id, title, path, isLoaded} = currentFile\n    if (!isLoaded) {\n     \n      if(getAutoSync()) {\n        ipcRenderer.send('download-file',{key:`${title}.md`, path, id})\n      } else {\n        fileHelper.readFile(currentFile.path).then(value => {\n          const newFile = {...files[fileID], body:value, isLoaded:true}\n          setFiles({...files,[fileID]:newFile})\n        })\n      }\n    }\n    // if opendeFiles don't have the current ID\n    if (!openedFileIDs.includes(fileID)){\n    // add new fileId to openedFiles\n        setOpenedFileIDs([...openedFileIDs,fileID])\n      }\n  }\n\n  const tabClick = (fileID) => {\n    //set current active file\n    setActiveFileID(fileID)\n  }\n\n  const tabClose = (id) => {\n    // remove current id from openedFileIDs\n    const tabsWithout = openedFileIDs.filter(fileID => fileID !== id)\n    setOpenedFileIDs(tabsWithout)\n    //set the active to the first opened tab if still tabs left\n    if (tabsWithout.length > 0) {\n      setActiveFileID(tabsWithout[0])\n    } else {\n      setActiveFileID('')\n    }\n    \n  }\n\n  const fileChange = (id,value) => {\n    if (value !== files[id].body) {\n      const newFile = {...files[id],body:value} \n      setFiles({...files, [id]: newFile}) \n      if (!unsavedFileIDs.includes(id)) {\n        setUnsavedFileIDs([...unsavedFileIDs, id])\n      }\n    }\n    //修改前\n    // const newFiles = files.map(file => {\n    //   if (file.id === id) {\n    //     file.body = value\n    //   }\n    //   return file\n    // })\n\n    // 修改后\n    // const newFile = {...files[id],body:value}\n\n    // 修改前\n    // setFiles(newFiles)\n    //修改后\n    // setFiles({...files, [id]: newFile})\n\n    //update unsaveIds\n    // if (!unsaveFileIDs.includes(id)) {\n    //   setUnsavedFileIDs([...unsaveFileIDs, id])\n    // }\n  }\n    const deleteFile = (id) => {\n    if (files[id].isNew) {\n      const { [id]: value, ...afterDelete } = files\n      setFiles(afterDelete)\n    } else {\n      fileHelper.deleteFile(files[id].path).then(() => {\n        const { [id]: value, ...afterDelete } = files\n        setFiles(afterDelete)\n        saveFilesToStore(afterDelete)\n        // close the tab if opened\n        tabClose(id)\n      })\n    }\n  }\n  const updateFileName = (id, title,isNew) => {\n\n    // newPath should be different based on isNew\n    // if isNew is false, path should be old dirnam + new title\n    const newPath = isNew ? join(savedLocation,`${title}.md`) : join(dirname(files[id].path), `${title}.md`)\n\n    const modifiedFile = {...files[id], title, isNew:false, path:newPath}\n    const newFiles = {...files,[id]:modifiedFile}\n     \n    if (isNew) {\n      fileHelper.writeFile(newPath, files[id].body).then(()=>{\n        setFiles(newFiles)\n        saveFilesToStore(newFiles)\n      })\n    } else {\n      // const oldPath = join(savedLocation,`${files[id].title}.md`)\n      const oldPath = files[id].path\n      fileHelper.renameFile(oldPath, newPath).then(()=>{\n        setFiles(newFiles)\n        saveFilesToStore(newFiles)\n      })\n    }\n\n    //修改前\n    // setFiles(newFiles)\n    //修改后\n    // setFiles({...files, [id]: modifiedFile})\n  }\n\n  const fileSearch = (keyword) => {\n    // const newFiles = files.filter(file => file.title.includes(keyword))\n    const newFiles = filesArr.filter(file => file.title.includes(keyword)) \n    setSearchedFiles(newFiles)\n  }\n\n  const createNewFile = () => {\n    const newID = uuidv4()\n    const newFile = {\n      id: newID,\n      title: '',\n      body: '## 请输出 Markdown',\n      createdAt: new Date().getTime(),\n      isNew: true,\n    }\n    setFiles({ ...files, [newID]: newFile })\n  }\n\n  //修改前\n  // const activeFile = files.find(file => file.id === activeFileID)\n  const activeFile = files[activeFileID]\n \n  // const fileListArr = (searchedFiles.length > 0) ? searchedFiles : files\n  const fileListArr = (searchedFiles.length > 0) ? searchedFiles : filesArr\n\n  const saveCurrentFile = () => {\n    const { path, body, title } = activeFile\n    fileHelper.writeFile(path, body).then(() => {\n      setUnsavedFileIDs(unsavedFileIDs.filter(id => id !== activeFile.id))\n      if (getAutoSync()) {\n        ipcRenderer.send('upload-file', {key: `${title}.md`, path })\n      }\n    })\n  }\n\n\n  //文件导入\n  const importFiles = () => {\n    remote.dialog.showOpenDialog({\n      title:'选择导入的 markdown 文件',\n      properties:['openFile', 'multiSelections'],\n      filters:[\n        {name: 'Markdown files', extensions:['md']}\n      ]\n    }).then(result =>{\n      let paths = result.filePaths;\n      if (Array.isArray(paths)) {\n        //filter out the path we already have in electron store\n        //去重\n        const filteredPaths = paths.filter(path => {\n          const alreadyAdded = Object.values(files).find(file => {\n            return file.path === path\n          })\n          return !alreadyAdded\n        })\n       \n        //extend the path array to an array contains files info\n        const importFilesArr = filteredPaths.map(path => {\n          return {\n            id: uuidv4(),\n            title: basename(path, extname(path)),\n            path,\n          }\n        })\n        \n        //get the new files object in flattenarr\n        const newFiles  = {...files, ...flattenArr(importFilesArr)}\n      \n        setFiles(newFiles)\n        saveFilesToStore(newFiles)\n        \n        if (importFilesArr.length > 0) {\n          remote.dialog.showMessageBox({\n            type:'info',\n            title:`成功导入了${importFilesArr.length}个文件`,\n            message:`成功导入了${importFilesArr.length}个文件`\n          })\n        }\n\n        //setstate and update electron store\n      }\n    }).catch(err => {\n      console.log(err)\n    })\n  }\n  const activeFileUploaded = () => {\n    const { id } = activeFile\n    const modifiedFile = { ...files[id], isSynced: true, updatedAt: new Date().getTime() }\n    const newFiles = { ...files, [id]: modifiedFile }\n    setFiles(newFiles)\n    saveFilesToStore(newFiles)\n  }\n\n  const activeFileDownloaded = (event, message) => {\n    const currentFile = files[message.id]\n    const { id, path } = currentFile\n    fileHelper.readFile(path).then(value => {\n      let newFile\n      if (message.status === 'download-success') {\n        newFile = { ...files[id], body: value, isLoaded: true, isSynced: true, updatedAt: new Date().getTime() }\n      } else {\n        newFile = { ...files[id], body: value, isLoaded: true}\n      }\n      const newFiles = { ...files, [id]: newFile }\n      setFiles(newFiles)\n      saveFilesToStore(newFiles)\n    })\n  }\n  const filesUploaded = () => {\n    const newFiles = objToArr(files).reduce((result, file) => {\n      const currentTime = new Date().getTime()\n      result[file.id] = {\n        ...files[file.id],\n        isSynced: true,\n        updatedAt: currentTime,\n      }\n      return result\n    }, {})\n    setFiles(newFiles)\n    saveFilesToStore(newFiles)\n  }\n  //原生菜单栏\n useIpcRenderer({\n   'create-new-file':createNewFile,\n   'import-file': importFiles,\n   'save-edit-file': saveCurrentFile,\n   'active-file-uploaded':activeFileUploaded,//更新到云\n   'file-downloaded': activeFileDownloaded,\n   'files-uploaded': filesUploaded,\n   'loading-status': (message, status) => { setLoading(status) }\n })\n  return (\n    <div className=\"App container-fluid px-0\">\n      {isLoading && \n          <Loader/>\n      }\n      <div className=\"row no-gutters\">\n        <div className=\"col-3 left-panel\">\n          <FileSearch title='我的云文档' \n          onFileSearch={fileSearch} />\n\n          <FileList\n             files={fileListArr}\n             onFileClick={fileClick}\n             onFileDelete={deleteFile}\n             onSaveEdit={updateFileName}\n           />\n\n           <div className=\"row no-gutters button-group\">\n             <div className=\"col-6\">\n               <BottomBtn \n                  text=\"新建\"\n                  colorClass=\"btn-primary\"\n                  icon={faPlus}\n                  onBtnClick={createNewFile}\n               />\n             </div>\n             <div className=\"col-6\">\n               <BottomBtn\n                   text=\"导入\"\n                   colorClass=\"btn-success\"\n                   icon={faFileImport}\n                   onBtnClick={importFiles}\n                />\n             </div>\n           </div>\n        </div>\n        <div className=\"col-9 right-panel\">\n          { !activeFile && \n             <div className=\"start-page\">\n               选择或创建新的 Markdown 文档\n             </div>\n          }\n          { activeFile && \n            <>\n              <TabList \n                files={openedFiles}\n                activeId={activeFileID}\n                unsaveIds={unsavedFileIDs}\n                onTabClick={tabClick}\n                onCloseTab={tabClose}\n              />\n              <SimpleMDE \n              key={activeFile && activeFile.id}\n              value={activeFile && activeFile.body} \n              onChange={(value)=>{fileChange(activeFile.id,value)}}\n              options={{\n                  minHeight: '515px',\n                }}\n              />\n              { activeFile.isSynced &&\n               <span className=\"sync-status\">\n                 已同步，上次同步{timestampToString(activeFile.updatedAt)}\n               </span>\n              }\n               {/* <BottomBtn\n                   text=\"保存\"\n                   colorClass=\"btn-success button-group\"\n                   icon={faSave}\n                   onBtnClick={saveCurrentFile}\n                /> */}\n             </>\n          }\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/components/BottomBtn.js",[],"/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/components/TabList.js",["129"],"import React from 'react'\nimport PropTypes from 'prop-types'\nimport className from 'classnames'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes} from '@fortawesome/free-solid-svg-icons'\nimport './TabList.scss'\n\nconst TabList = ({files, activeId, unsaveIds,onTabClick,onCloseTab}) =>{\n    return (\n        <ul className=\"nav nav-pills tablist-component\">\n            {files.map(file => {\n                const withUnsavedMark = unsaveIds.includes(file.id)\n                const fClassName = className({\n                    'nav-link':true,\n                    'active': file.id === activeId,\n                    'withUnsaved' : withUnsavedMark\n                })\n                return (\n                    <li className=\"nav-item\" key={file.id}>\n                        <a href=\"\" \n                        className={fClassName}\n                        onClick={(e)=>{e.preventDefault(); onTabClick(file.id)}}\n                        >\n                            {file.title}\n\n                        <span \n                        className=\"ml-2 close-icon\"\n                        onClick={(e)=>{e.stopPropagation(); onCloseTab(file.id)}}\n                        >\n                           <FontAwesomeIcon icon={faTimes}/>\n                        </span>\n                    \n                        {withUnsavedMark && <span className=\"rounded-circle unsaved-icon ml-2\"></span>}\n                        </a>\n                    </li>\n                )\n            })}\n        </ul>\n    )\n}\n\nTabList.protoTypes = {\n    files: PropTypes.array,\n    activeId: PropTypes.string,\n    unsaveIds: PropTypes.array,\n    onTabClick: PropTypes.func,\n    onCloseTab: PropTypes.func\n}\nTabList.defaultProps = {\n    unsaveIds:[]\n}\n\nexport default TabList","/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/components/FileSearch.js",[],"/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/components/Loader.js",[],"/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/hooks/useIpcRenderer.js",[],"/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/utils/defaultFiles.js",[],"/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/utils/fileHelper.js",[],"/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/utils/helper.js",[],"/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/components/FileList.js",["130","131","132"],"import React, { useState,useEffect,useRef} from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes, faTrash,faEdit } from '@fortawesome/free-solid-svg-icons'\nimport { faMarkdown } from '@fortawesome/free-brands-svg-icons'\nimport PropTypes from 'prop-types';\nimport useKeyPress from '../hooks/useKeyPress'\nimport useContextMenu from '../hooks/useContextMenu'\nimport { getParentNode } from '../utils/helper'\n//load nodejs modules\nconst {remote} = window.require('electron')\nconst {Menu, MenuItem}  = remote\n\n\nconst FileList  = ({files, onFileClick,onSaveEdit,onFileDelete}) => {\n    const [editStatus, setEditStatus] = useState(false)\n    const [value, setValue] = useState('')\n    let node = useRef(null)\n\n    const enterPressed = useKeyPress(13)\n    const escPressed = useKeyPress(27)\n\n    const closeSearch = (editItem) => {\n        setEditStatus(false);\n        setValue('');\n\n        if (editItem.isNew) {\n            onFileDelete(editItem.id)\n        }\n    }\n    const clickedItem = useContextMenu([\n        {\n            label:'打开',\n            click: () => {\n                const parentElement = getParentNode(clickedItem.current,'file-item',[files])\n                if (parentElement) {\n                    onFileClick(parentElement.dataset.id)\n                }\n            }\n        },\n        {\n            label:'重命名',\n            click: () => {\n                const parentElement = getParentNode(clickedItem.current,'file-item',[files])\n                if (parentElement) {\n                    setEditStatus(parentElement.dataset.id)\n                    setValue(parentElement.dataset.title)\n                }\n            }\n        },\n        {\n            label:'删除',\n            click: () => {\n                const parentElement = getParentNode(clickedItem.current,'file-item',[files])\n                if (parentElement) {\n                    onFileDelete(parentElement.dataset.id)\n                }\n            }\n        }\n    ],'.file-list')\n    \n    useEffect(() => {\n        const editItem = files.find(file=> file.id === editStatus)\n        if (enterPressed && editStatus && value.trim() !== '') {\n            onSaveEdit(editItem.id,value,editItem.isNew)\n            setEditStatus(false)\n            setValue('')\n        }\n        if (escPressed && editStatus) {\n            closeSearch(editItem);\n        }\n\n        // const handleInputEvent = (event) => {\n        //     const { keyCode } = event;\n        //     if (keyCode === 13 && editStatus) {\n        //         const editItem = files.find(file=> file.id === editStatus)\n        //         onSaveEdit(editItem.id,value)\n        //         setEditStatus(false)\n        //         setValue('')\n        //     } else if (keyCode === 27 && editStatus) {\n        //         closeSearch(event);\n        //     }\n        // };\n        // document.addEventListener('keyup', handleInputEvent);\n        // return () => {\n        //     document.removeEventListener('keyup', handleInputEvent);\n        // };\n    })\n    \n    useEffect(()=>{\n        const newFile = files.find(file => file.isNew)\n        // console.log(newFile)\n        if (newFile) {\n            setEditStatus(newFile.id)\n            setValue(newFile.title)\n        }\n    },[files])\n\n    useEffect(()=> {\n        if (editStatus) {\n            node.current.focus()\n        }\n    },[editStatus])\n    return (\n        <ul className=\"list-group list-group-flush file-list\">\n            {\n                files.map(file => (\n                    <li\n                      className=\"row list-group-item bg-light d-flex align-items-center file-item mx-0\"\n                      key={file.id}\n                      data-id = {file.id}\n                      data-title = {file.title}\n                    >\n                     {((file.id !== editStatus) && !file.isNew) &&\n                     <>\n                        <span className=\"col-2\">\n                            <FontAwesomeIcon icon={faMarkdown}/>\n                        </span>\n                        <span \n                        className=\"col-6 c-link\"\n                        onClick={()=>{onFileClick(file.id)}}\n                        >{file.title}</span>\n                        <button\n                                type=\"button\"\n                                className=\"icon-button col-1\"\n                                 onClick={()=>{setEditStatus(file.id);setValue(file.title)}}\n                            >\n                                <FontAwesomeIcon title=\"编辑\" icon={faEdit} />\n                        </button>\n                        <button\n                                type=\"button\"\n                                className=\"icon-button col-1\"\n                                onClick={()=>{onFileDelete(file.id)}}\n                            >\n                                <FontAwesomeIcon title=\"删除\" icon={faTrash} />\n                        </button>\n                        </>\n                        }\n                        {((file.id === editStatus) || file.isNew)&& \n                            <>\n                                <input\n                                    className=\"form-control col-10\"\n                                    value={value}\n                                    ref = {node}\n                                    placeholder='请输入文档名称'\n                                    onChange={(e) => { setValue(e.target.value); } } />\n                                <button\n                                    type=\"button\"\n                                    className=\"icon-button col-2\"\n                                    onClick={()=>{closeSearch(file)}}\n                                >\n                                    <FontAwesomeIcon title=\"关闭\" icon={faTimes} />\n                                </button>\n                            </>\n                        }\n                    </li>\n                ))\n            }\n        </ul>\n    )\n}\nFileList.protoTypes = {\n    files: PropTypes.array,\n    onFileClick: PropTypes.func,\n    onFileDelete: PropTypes.func,\n    onSaveEdit:PropTypes.func\n}\nexport default FileList","/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/hooks/useContextMenu.js",["133","134"],"import {useEffect, useRef} from 'react'\n\nconst {remote} = window.require('electron')\nconst {Menu, MenuItem}  = remote\n\nconst useContextMenu = (itemArr,targetSelector,deps)  => {\n    let clickedElement = useRef(null)\n    useEffect(()=>{\n        const menu = new Menu()\n        itemArr.forEach(item => {\n            menu.append(new MenuItem(item))\n        })\n        const handleContextMenu = (e) => {\n            //only show the contect menu on current dom element or targeselector\n            if (document.querySelector(targetSelector).contains(e.target)){\n                clickedElement.current = e.target\n                menu.popup({window: remote.getCurrentWindow()})\n            }\n        }\n        window.addEventListener('contextmenu', handleContextMenu)\n        return() => {\n            window.removeEventListener('contextmenu',handleContextMenu)\n        }\n    },deps)\n    return clickedElement\n}\n\nexport default useContextMenu",["135","136"],"/Users/suyuhuan/Downloads/视频/Electron+React+七牛云 实战跨平台桌面应用/myCode/mk-doc/src/hooks/useKeyPress.js",["137"],"import {useState,useEffect} from 'react'\n\nconst useKeyPress = (targetKeyCode) => {\n    const [keyPressed, setKeyPressed] = useState(false)\n    const keyDownHandler = ({keyCode}) => {\n        if (keyCode === targetKeyCode) {\n            setKeyPressed(true)\n        }\n    }\n    const keyUpHandler = ({keyCode})=>{\n        if (keyCode === targetKeyCode) {\n            setKeyPressed(false)\n        }\n    }\n    useEffect(()=> {\n        document.addEventListener('keydown',keyDownHandler)\n        document.addEventListener('keyup',keyUpHandler)\n        return () => {\n            document.removeEventListener('keydown', keyDownHandler)\n            document.removeEventListener('keyup',keyUpHandler)\n        }\n    },[])\n\n    return keyPressed\n}\n\nexport default useKeyPress","/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/index.js",[],["138","139"],"/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/reportWebVitals.js",[],"/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/App.js",["140","141","142","143"],"/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/components/FileSearch.js",[],"/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/components/TabList.js",["144"],"/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/components/BottomBtn.js",[],"/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/components/FileList.js",["145","146","147"],"/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/components/Loader.js",[],"/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/utils/defaultFiles.js",[],"/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/utils/helper.js",[],"/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/utils/fileHelper.js",[],"/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/hooks/useIpcRenderer.js",[],"/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/hooks/useKeyPress.js",["148"],"/Users/suyuhuan/Downloads/suyuhuanGit/mk-doc/src/hooks/useContextMenu.js",["149","150"],{"ruleId":"151","replacedBy":"152"},{"ruleId":"153","replacedBy":"154"},{"ruleId":"155","severity":1,"message":"156","line":1,"column":19,"nodeType":"157","messageId":"158","endLine":1,"endColumn":28},{"ruleId":"155","severity":1,"message":"159","line":8,"column":8,"nodeType":"157","messageId":"158","endLine":8,"endColumn":20},{"ruleId":"155","severity":1,"message":"160","line":16,"column":10,"nodeType":"157","messageId":"158","endLine":16,"endColumn":16},{"ruleId":"155","severity":1,"message":"161","line":17,"column":32,"nodeType":"157","messageId":"158","endLine":17,"endColumn":38},{"ruleId":"162","severity":1,"message":"163","line":20,"column":25,"nodeType":"164","endLine":23,"endColumn":26},{"ruleId":"155","severity":1,"message":"165","line":11,"column":8,"nodeType":"157","messageId":"158","endLine":11,"endColumn":12},{"ruleId":"155","severity":1,"message":"166","line":11,"column":14,"nodeType":"157","messageId":"158","endLine":11,"endColumn":22},{"ruleId":"167","severity":1,"message":"168","line":61,"column":5,"nodeType":"157","endLine":61,"endColumn":14,"suggestions":"169"},{"ruleId":"167","severity":1,"message":"170","line":24,"column":7,"nodeType":"157","endLine":24,"endColumn":11},{"ruleId":"167","severity":1,"message":"171","line":24,"column":7,"nodeType":"157","endLine":24,"endColumn":11,"suggestions":"172"},{"ruleId":"151","replacedBy":"173"},{"ruleId":"153","replacedBy":"174"},{"ruleId":"167","severity":1,"message":"175","line":22,"column":7,"nodeType":"176","endLine":22,"endColumn":9,"suggestions":"177"},{"ruleId":"151","replacedBy":"178"},{"ruleId":"153","replacedBy":"179"},{"ruleId":"155","severity":1,"message":"156","line":1,"column":19,"nodeType":"157","messageId":"158","endLine":1,"endColumn":28},{"ruleId":"155","severity":1,"message":"159","line":8,"column":8,"nodeType":"157","messageId":"158","endLine":8,"endColumn":20},{"ruleId":"155","severity":1,"message":"160","line":16,"column":10,"nodeType":"157","messageId":"158","endLine":16,"endColumn":16},{"ruleId":"155","severity":1,"message":"161","line":17,"column":32,"nodeType":"157","messageId":"158","endLine":17,"endColumn":38},{"ruleId":"162","severity":1,"message":"163","line":20,"column":25,"nodeType":"164","endLine":23,"endColumn":26},{"ruleId":"155","severity":1,"message":"165","line":11,"column":8,"nodeType":"157","messageId":"158","endLine":11,"endColumn":12},{"ruleId":"155","severity":1,"message":"166","line":11,"column":14,"nodeType":"157","messageId":"158","endLine":11,"endColumn":22},{"ruleId":"167","severity":1,"message":"168","line":61,"column":5,"nodeType":"157","endLine":61,"endColumn":14,"suggestions":"180"},{"ruleId":"167","severity":1,"message":"175","line":22,"column":7,"nodeType":"176","endLine":22,"endColumn":9,"suggestions":"181"},{"ruleId":"167","severity":1,"message":"170","line":24,"column":7,"nodeType":"157","endLine":24,"endColumn":11},{"ruleId":"167","severity":1,"message":"171","line":24,"column":7,"nodeType":"157","endLine":24,"endColumn":11,"suggestions":"182"},"no-native-reassign",["183"],"no-negated-in-lhs",["184"],"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'defaultFiles' is defined but never used.","'faLess' is defined but never used.","'faSave' is defined but never used.","jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","'Menu' is assigned a value but never used.","'MenuItem' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect contains a call to 'setEditStatus'. Without a list of dependencies, this can lead to an infinite chain of updates. To fix this, pass [files, enterPressed, editStatus, value, escPressed, onSaveEdit, closeSearch] as a second argument to the useEffect Hook.",["185"],"React Hook useEffect was passed a dependency list that is not an array literal. This means we can't statically verify whether you've passed the correct dependencies.","React Hook useEffect has missing dependencies: 'itemArr' and 'targetSelector'. Either include them or remove the dependency array.",["186"],["183"],["184"],"React Hook useEffect has missing dependencies: 'keyDownHandler' and 'keyUpHandler'. Either include them or remove the dependency array.","ArrayExpression",["187"],["183"],["184"],["188"],["189"],["190"],"no-global-assign","no-unsafe-negation",{"desc":"191","fix":"192"},{"desc":"193","fix":"194"},{"desc":"195","fix":"196"},{"desc":"191","fix":"197"},{"desc":"195","fix":"198"},{"desc":"193","fix":"199"},"Add dependencies array: [files, enterPressed, editStatus, value, escPressed, onSaveEdit, closeSearch]",{"range":"200","text":"201"},"Update the dependencies array to be: [itemArr, targetSelector]",{"range":"202","text":"203"},"Update the dependencies array to be: [keyDownHandler, keyUpHandler]",{"range":"204","text":"205"},{"range":"206","text":"201"},{"range":"207","text":"205"},{"range":"208","text":"203"},[3021,3021],", [files, enterPressed, editStatus, value, escPressed, onSaveEdit, closeSearch]",[871,875],"[itemArr, targetSelector]",[709,711],"[keyDownHandler, keyUpHandler]",[3021,3021],[709,711],[871,875]]